var h=Object.defineProperty;var p=(a,t,s)=>t in a?h(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;var i=(a,t,s)=>(p(a,typeof t!="symbol"?t+"":t,s),s);import{P as l}from"./vendor.c2cc9365.js";const u=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&e(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}};u();class y extends l.GameObjects.Sprite{constructor(t,s,e,r){super(t,s,e,r);this.setScale(.5)}}class m extends l.Scene{constructor(){super("game");i(this,"player");i(this,"platforms");i(this,"carrotsCollected",0);i(this,"carrotsCollectedText");i(this,"carrotsCollectedWorldRecord");i(this,"goodLuckText");i(this,"authorText");i(this,"cursors");i(this,"carrots")}init(){console.log("\u{1F995} init"),this.carrotsCollected=0}preload(){console.log("\u{1F995} preload"),this.cursors=this.input.keyboard.createCursorKeys(),this.load.image("platform","assets/textures/ground_cake.png"),this.load.image("bunny-stand","assets/textures/bunny2_stand.png"),this.load.image("bunny-jump","assets/textures/bunny2_jump.png"),this.load.audio("jump","assets/audio/phaseJump1.ogg"),this.load.image("carrot","assets/textures/carrot.png"),this.load.image("arrow-left","assets/icons/MdiArrowLeftCircle.svg"),this.load.image("arrow-right","assets/icons/MdiArrowRightCircle.svg")}create(){console.log("\u{1F995} create"),this.platforms=this.physics.add.staticGroup();for(let s=0;s<5;++s){const e=l.Math.Between(90,313),r=150*s,o=this.platforms.create(e,r,"platform");o.scale=.5,o.body.updateFromGameObject()}this.player=this.physics.add.sprite(196,312,"bunny-stand").setScale(.5),this.physics.add.collider(this.platforms,this.player),this.player.body.checkCollision.up=!1,this.player.body.checkCollision.left=!1,this.player.body.checkCollision.right=!1,this.cameras.main.startFollow(this.player),this.cameras.main.setDeadzone(this.scale.width*1.5);const t={color:"#000"};this.carrotsCollectedText=this.add.text(70,15,"Carrots: 0",t).setScrollFactor(0).setOrigin(.5,0),this.carrotsCollectedWorldRecord=this.add.text(300,15,`World Record: ${localStorage.getItem("world-record")||"0"}`,t).setScrollFactor(0).setOrigin(.5,0),this.goodLuckText=this.add.text(200,300,"GL && HF",t).setOrigin(.5,0),this.authorText=this.add.text(315,595,"by mioe 2021",t).setOrigin(.5,0),this.add.image(40,560,"arrow-left").setName("left").setScrollFactor(0).setOrigin(.5,0).setInteractive(),this.add.image(350,560,"arrow-right").setName("right").setScrollFactor(0).setOrigin(.5,0).setInteractive(),this.input.on("gameobjectdown",(s,e)=>{e.setTintFill(16711680,16776960,16711680,16711680),this.cursors[e.name].isDown=!0}),this.input.on("gameobjectup",(s,e)=>{e.clearTint(),this.cursors[e.name].isDown=!1}),this.carrots=this.physics.add.group({classType:y}),this.physics.add.collider(this.platforms,this.carrots),this.physics.add.overlap(this.player,this.carrots,this.handleCollectCarrot,void 0,this)}update(t,s){const e=this.player.body.touching.down;e&&(this.player.setVelocityY(-300),this.player.setTexture("bunny-jump"),this.sound.play("jump")),this.player.body.velocity.y>0&&this.player.texture.key!=="bunny-stand"&&this.player.setTexture("bunny-stand"),this.cursors.left.isDown&&!e?this.player.setVelocityX(-200):this.cursors.right.isDown&&!e?this.player.setVelocityX(200):this.player.setVelocityX(0),this.horizontalWrap(this.player),this.platforms.children.iterate(c=>{const n=c,d=this.cameras.main.scrollY;n.y>=d+700&&(n.y=d-l.Math.Between(50,100),n.body.updateFromGameObject(),this.addCarrotAbove(n))});const o=this.findBottomMostPlatform();this.player.y>o.y+200&&(localStorage.getItem("world-record")?this.carrotsCollected>Number(localStorage.getItem("world-record"))&&localStorage.setItem("world-record",String(this.carrotsCollected)):localStorage.setItem("world-record",String(this.carrotsCollected)),this.scene.start("game-over"))}horizontalWrap(t){const s=t.displayWidth*.5,e=this.scale.width;t.x<-s?t.x=e+s:t.x>e+s&&(t.x=-s)}addCarrotAbove(t){const s=t.y-t.displayHeight,e=this.carrots.get(t.x,s,"carrot");return e.setActive(!0),e.setVisible(!0),this.add.existing(e),e.body.setSize(e.width,e.height),this.physics.world.enable(e),e}handleCollectCarrot(t,s){this.carrots.killAndHide(s),this.physics.world.disableBody(s.body),this.carrotsCollected++;const e=`Carrots: ${this.carrotsCollected}`;this.carrotsCollectedText.text=e}findBottomMostPlatform(){const t=this.platforms.getChildren();let s=t[0];for(let e=1;e<t.length;++e){const r=t[e];r.y<s.y||(s=r)}return s}}class g extends l.Scene{constructor(){super("game-over")}preload(){this.load.image("refresh-circle","assets/icons/MdiRefreshCircle.svg")}create(){const t=this.scale.width,s=this.scale.height;this.add.text(t*.5,s*.5,`Game Over...


press SPACE
or
press Refresh`,{fontSize:24}).setOrigin(.5),this.add.image(t*.5,s*.8,"refresh-circle").setName("left").setScrollFactor(0).setOrigin(.5,0).setInteractive(),this.input.on("gameobjectdown",(e,r)=>{r.setTintFill(16711680,16776960,16711680,16711680)}),this.input.on("gameobjectup",(e,r)=>{r.clearTint(),this.scene.start("game")}),this.input.keyboard.once("keydown-SPACE",()=>{this.scene.start("game")})}}new l.Game({type:l.AUTO,width:393,height:624,scene:[m,g],backgroundColor:"#f2c0c0",physics:{default:"arcade",arcade:{gravity:{y:200}}}});
