var h=Object.defineProperty;var y=(a,t,e)=>t in a?h(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var i=(a,t,e)=>(y(a,typeof t!="symbol"?t+"":t,e),e);import{P as l}from"./vendor.c2cc9365.js";const u=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}};u();class p extends l.GameObjects.Sprite{constructor(t,e,s,o){super(t,e,s,o);this.setScale(.5)}}class m extends l.Scene{constructor(){super("game");i(this,"player");i(this,"platforms");i(this,"carrotsCollected",0);i(this,"carrotsCollectedText");i(this,"carrotsCollectedWorldRecord");i(this,"goodLuckText");i(this,"authorText");i(this,"cursors");i(this,"carrots")}init(){console.log("\u{1F995} init"),this.carrotsCollected=0}preload(){console.log("\u{1F995} preload"),this.cursors=this.input.keyboard.createCursorKeys(),this.load.image("platform","assets/textures/ground_cake.png"),this.load.image("bunny-stand","assets/textures/bunny2_stand.png"),this.load.image("bunny-jump","assets/textures/bunny2_jump.png"),this.load.audio("jump","assets/audio/phaseJump1.ogg"),this.load.image("carrot","assets/textures/carrot.png")}create(){console.log("\u{1F995} create"),this.platforms=this.physics.add.staticGroup();for(let e=0;e<5;++e){const s=l.Math.Between(90,313),o=150*e,r=this.platforms.create(s,o,"platform");r.scale=.5,r.body.updateFromGameObject()}this.player=this.physics.add.sprite(196,312,"bunny-stand").setScale(.5),this.physics.add.collider(this.platforms,this.player),this.player.body.checkCollision.up=!1,this.player.body.checkCollision.left=!1,this.player.body.checkCollision.right=!1,this.cameras.main.startFollow(this.player),this.cameras.main.setDeadzone(this.scale.width*1.5);const t={color:"#000"};this.carrotsCollectedText=this.add.text(70,15,"Carrots: 0",t).setScrollFactor(0).setOrigin(.5,0),this.carrotsCollectedWorldRecord=this.add.text(300,15,`World Record: ${localStorage.getItem("world-record")||"0"}`,t).setScrollFactor(0).setOrigin(.5,0),this.goodLuckText=this.add.text(200,300,"GL && HF",t).setOrigin(.5,0),this.authorText=this.add.text(315,595,"by mioe 2021",t).setOrigin(.5,0),this.carrots=this.physics.add.group({classType:p}),this.physics.add.collider(this.platforms,this.carrots),this.physics.add.overlap(this.player,this.carrots,this.handleCollectCarrot,void 0,this)}update(t,e){const s=this.player.body.touching.down;s&&(this.player.setVelocityY(-300),this.player.setTexture("bunny-jump"),this.sound.play("jump")),this.player.body.velocity.y>0&&this.player.texture.key!=="bunny-stand"&&this.player.setTexture("bunny-stand"),this.cursors.left.isDown&&!s?this.player.setVelocityX(-200):this.cursors.right.isDown&&!s?this.player.setVelocityX(200):this.player.setVelocityX(0),this.horizontalWrap(this.player),this.platforms.children.iterate(c=>{const d=c,n=this.cameras.main.scrollY;d.y>=n+700&&(d.y=n-l.Math.Between(50,100),d.body.updateFromGameObject(),this.addCarrotAbove(d))});const r=this.findBottomMostPlatform();this.player.y>r.y+200&&(localStorage.getItem("world-record")?this.carrotsCollected>Number(localStorage.getItem("world-record"))&&localStorage.setItem("world-record",String(this.carrotsCollected)):localStorage.setItem("world-record",String(this.carrotsCollected)),this.scene.start("game-over"))}horizontalWrap(t){const e=t.displayWidth*.5,s=this.scale.width;t.x<-e?t.x=s+e:t.x>s+e&&(t.x=-e)}addCarrotAbove(t){const e=t.y-t.displayHeight,s=this.carrots.get(t.x,e,"carrot");return s.setActive(!0),s.setVisible(!0),this.add.existing(s),s.body.setSize(s.width,s.height),this.physics.world.enable(s),s}handleCollectCarrot(t,e){this.carrots.killAndHide(e),this.physics.world.disableBody(e.body),this.carrotsCollected++;const s=`Carrots: ${this.carrotsCollected}`;this.carrotsCollectedText.text=s}findBottomMostPlatform(){const t=this.platforms.getChildren();let e=t[0];for(let s=1;s<t.length;++s){const o=t[s];o.y<e.y||(e=o)}return e}}class f extends l.Scene{constructor(){super("game-over")}create(){const t=this.scale.width,e=this.scale.height;this.add.text(t*.5,e*.5,`Game Over...
 press SPACE`,{fontSize:24}).setOrigin(.5),this.input.keyboard.once("keydown-SPACE",()=>{this.scene.start("game")})}}new l.Game({type:l.AUTO,width:393,height:624,scene:[m,f],backgroundColor:"#f2c0c0",physics:{default:"arcade",arcade:{gravity:{y:200}}}});
